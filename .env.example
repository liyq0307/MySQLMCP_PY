# MySQL MCP服务器 - 环境变量配置示例
# =============================================================================

# 使用说明:
# 1. 复制此文件为 .env: cp .env.example .env
# 2. 根据你的环境更新配置值
# 3. 服务器启动时会自动加载 .env 文件中的配置
# 4. 也可以通过直接设置环境变量来覆盖这些值

# 配置优先级（从高到低）:
# 1. 直接设置的环境变量
# 2. .env 文件中的配置
# 3. 代码中的默认值

# 注意事项:
# - 密码等敏感信息不应提交到版本控制系统
# - 生产环境中建议使用更严格的权限设置
# - 修改配置后需要重启服务器才能生效

# ===========================================
# MySQL 数据库连接配置 (必填)
# ===========================================
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_USER=mysql_user
MYSQL_PASSWORD=your_secure_password
MYSQL_DATABASE=test_database

# SSL 连接配置 (可选)
MYSQL_SSL=false

# 字符集和时区配置 (可选)
MYSQL_CHARSET=utf8mb4
MYSQL_TIMEZONE=+00:00

# ===========================================
# 连接池配置 (可选)
# ===========================================
# 最大连接数
MYSQL_CONNECTION_LIMIT=20

# 连接超时时间 (毫秒)
MYSQL_CONNECT_TIMEOUT=60000

# 空闲超时时间 (毫秒)
MYSQL_IDLE_TIMEOUT=300000

# 查询超时时间 (毫秒)
QUERY_TIMEOUT=30000

# ===========================================
# 缓存系统配置 (可选)
# ===========================================
# 表结构缓存大小
SCHEMA_CACHE_SIZE=128

# 表存在性检查缓存大小
TABLE_EXISTS_CACHE_SIZE=64

# 索引信息缓存大小
INDEX_CACHE_SIZE=64

# 缓存TTL时间 (秒)
CACHE_TTL=300

# ===========================================
# 安全配置 (可选)
# ===========================================
# 最大查询长度
SECURITY_MAX_QUERY_LENGTH=10000

# 最大输入长度
SECURITY_MAX_INPUT_LENGTH=1000

# 最大表名长度
SECURITY_MAX_TABLE_NAME_LENGTH=64

# 允许的查询类型 (逗号分隔)
SECURITY_ALLOWED_QUERY_TYPES=SELECT,INSERT,UPDATE,DELETE,SHOW,DESCRIBE,EXPLAIN,CREATE,DROP,ALTER

# 启用查询类型限制
SECURITY_ENABLE_QUERY_TYPE_RESTRICTIONS=true

# ===========================================
# 频率限制配置 (可选)
# ===========================================
# 每个时间窗口的最大请求数
RATE_LIMIT_MAX=100

# 时间窗口 (毫秒)
RATE_LIMIT_WINDOW=60000

# 启用频率限制
RATE_LIMIT_ENABLED=true

# ===========================================
# 监控配置 (可选)
# ===========================================
# 启用性能监控
MONITORING_ENABLED=true

# 性能快照间隔 (毫秒)
MONITORING_SNAPSHOT_INTERVAL=30000

# 指标历史记录大小
MONITORING_HISTORY_SIZE=1000

# 慢查询阈值 (毫秒)
MONITORING_SLOW_QUERY_THRESHOLD=1000

# ===========================================
# 内存监控配置 (可选)
# ===========================================
# 启用内存监控
MEMORY_MONITORING_ENABLED=true

# 内存监控间隔 (毫秒)
MEMORY_MONITORING_INTERVAL=30000

# 内存历史记录大小
MEMORY_HISTORY_SIZE=100

# 内存压力阈值 (0-1)
MEMORY_PRESSURE_THRESHOLD=0.8

# 缓存清理阈值 (0-1)
MEMORY_CACHE_CLEAR_THRESHOLD=0.85

# 启用自动垃圾回收
MEMORY_AUTO_GC=true

# ===========================================
# 系统资源监控配置 (可选)
# ===========================================
# 系统监控间隔 (毫秒)
SYSTEM_MONITORING_INTERVAL=30000

# ===========================================
# 服务器配置 (可选)
# ===========================================
# 服务器名称
SERVER_NAME=MySQL-MCP-Server

# 服务器版本
SERVER_VERSION=2.0.0

# 运行环境 (development, production, test)
NODE_ENV=development

# 日志级别 (debug, info, warn, error)
LOG_LEVEL=info

# 启用调试模式
DEBUG=false

# ===========================================
# MCP 协议配置 (可选)
# ===========================================
# MCP 服务器传输协议 (stdio)
MCP_TRANSPORT=stdio

# ============================================
# 不同环境的配置示例
# ============================================

# --- 生产环境推荐配置 ---
# - MYSQL_CONNECTION_LIMIT=50
# - SCHEMA_CACHE_SIZE=256
# - CACHE_TABLE_EXISTS_SIZE=128
# - RATE_LIMIT_MAX=1000
# - NODE_ENV=production
# - LOG_LEVEL=warn

# --- 开发环境推荐配置 ---
# - MYSQL_CONNECTION_LIMIT=10
# - DEBUG=true
# - NODE_ENV=development
# - LOG_LEVEL=debug

# --- 高性能环境配置 ---
# 适合高负载工作场景，大缓存和高并发
# MYSQL_CONNECTION_LIMIT=50
# MAX_RESULT_ROWS=5000
# RATE_LIMIT_MAX=500
# SCHEMA_CACHE_SIZE=512
# TABLE_EXISTS_CACHE_SIZE=256
# INDEX_CACHE_SIZE=256
# BATCH_SIZE=2000
# MONITORING_SLOW_QUERY_THRESHOLD=3000

# --- 内存受限环境配置 ---
# 适合内存有限的环境，减少缓存使用
# MYSQL_CONNECTION_LIMIT=3
# MAX_RESULT_ROWS=200
# RATE_LIMIT_MAX=20
# SCHEMA_CACHE_SIZE=32
# TABLE_EXISTS_CACHE_SIZE=16
# INDEX_CACHE_SIZE=16
# BATCH_SIZE=100
# CACHE_TTL=120